{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"49411735-b32ab4d57ab72698c2bda355f\";\nconst URL = \"https://pixabay.com/api/\";\n\n/**\n Pixabay\n * @param {string} query\n * @param {number} page \n * @param {number} perPage \n * @returns {Promise<{images: Array, totalHits: number}>}\n */\nexport async function fetchImages(query, page = 1, perPage = 40) {\n    try {\n        const response = await axios.get(URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: \"true\",\n                page,\n                per_page: perPage,\n            },\n        });\n\n        return {\n            images: response.data.hits,\n            totalHits: response.data.totalHits,\n        };\n    } catch (error) {\n        console.error(\"Error fetching images:\", error);\n        throw error;\n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\n\nexport function clearGallery() {\n    gallery.innerHTML = \"\";\n}\n\n/**\n * @param {Array} images \n */\nexport function renderImages(images) {\n  const markup = images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <li class=\"img-card\">\n        <a href=\"${largeImageURL}\" target=\"_blank\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"image-info\">\n          <p>‚ù§Ô∏è Likes: <strong>${likes}</strong></p>\n          <p>üëÅ Views: <strong>${views}</strong></p>\n          <p>üí¨ Comments: <strong>${comments}</strong></p>\n          <p>‚¨á Downloads: <strong>${downloads}</strong></p>\n        </div>\n      </li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, clearGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('#input');\nconst gallery = document.querySelector('.gallery');\nconst loadingMessage = document.querySelector('#loading-message');\n\nconst loadMoreBtn = document.createElement('button');\nloadMoreBtn.textContent = 'Load more';\nloadMoreBtn.id = 'load-more-btn';\nloadMoreBtn.style.display = 'none';\ndocument.body.appendChild(loadMoreBtn);\n\nlet query = '';\nlet page = 1;\nconst perPage = 15;\nlet totalHits = 0;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  query = input.value.trim();\n\n  if (!query) return;\n\n  page = 1;\n  clearGallery();\n  loadMoreBtn.style.display = 'none';\n  loadingMessage.style.display = 'block';\n\n  try {\n    const { images, totalHits: newTotalHits } = await fetchImages(\n      query,\n      page,\n      perPage\n    );\n    totalHits = newTotalHits;\n\n    if (images.length === 0) {\n      iziToast.warning({\n        title: 'Warning',\n        message: 'No images found. Try another search!',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    renderImages(images);\n\n    if (totalHits <= perPage) {\n      loadMoreBtn.style.display = 'none';\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n\n    iziToast.success({\n      title: 'Success',\n      message: `Found ${totalHits} images!`,\n      position: 'topRight',\n    });\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n      position: 'topRight',\n    });\n    console.error('Error fetching images:', error);\n  } finally {\n    loadingMessage.style.display = 'none';\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  page += 1;\n  loadMoreBtn.style.display = 'none';\n  loadingMessage.style.display = 'block';\n\n  try {\n    const { images } = await fetchImages(query, page, perPage);\n    renderImages(images);\n\n    const galleryHeight = gallery.getBoundingClientRect().height;\n    window.scrollBy({\n      top: galleryHeight * 0.5,\n      behavior: 'smooth',\n    });\n\n    const totalLoadedImages = page * perPage;\n    if (totalLoadedImages >= totalHits) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load more images.',\n      position: 'topRight',\n    });\n    console.error('Error loading more images:', error);\n  } finally {\n    loadingMessage.style.display = 'none';\n  }\n});\n"],"names":["API_KEY","URL","fetchImages","query","page","perPage","response","axios","error","gallery","lightbox","SimpleLightbox","clearGallery","renderImages","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","input","loadingMessage","loadMoreBtn","totalHits","event","newTotalHits","iziToast","galleryHeight"],"mappings":"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"}